LAYER
    NAME 'bureaux_vote'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.bureaux_vote AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'bureaux_vote') AS foo USING UNIQUE gid USING srid=900913"

    # Example data for secured layer by role (without any area)
    #DATA "geometrie FROM (SELECT geo.geom as geom FROM geodata.table AS geo WHERE %role_id% IN (${mapfile_data_noarea_subselect} 'layer_name')) as foo USING UNIQUE gid USING srid=-1"
    # Example data for public layer
    #DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.airedejeux AS geo) AS foo USING UNIQUE gid USING srid=900913"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:900913"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10 
    CLASS
        NAME "Bureaux de vote"
        STYLE
          WIDTH 0.5
          OUTLINECOLOR 192 255 192
          COLOR -1 -1 -1
        END
    END

    METADATA
        "wms_title" "Bureaux de vote" # For WMS
        "wms_srs" "epsg:900913" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Bureaux-de-vote" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END

LAYER
    NAME 'sous_quartiers'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.sous_quartiers AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'sous_quartiers') AS foo USING UNIQUE gid USING srid=900913"

    # Example data for secured layer by role (without any area)
    #DATA "geometrie FROM (SELECT geo.geom as geom FROM geodata.table AS geo WHERE %role_id% IN (${mapfile_data_noarea_subselect} 'layer_name')) as foo USING UNIQUE gid USING srid=-1"
    # Example data for public layer
    #DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.airedejeux AS geo) AS foo USING UNIQUE gid USING srid=900913"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:900913"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10 
    CLASS
        NAME "Sous-quartiers"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 0 192 0
          COLOR -1 -1 -1
        END
    END

    METADATA
        "wms_title" "Sous-quartiers" # For WMS
        "wms_srs" "epsg:900913" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Sous-quartiers" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END

LAYER
    NAME 'quartiers'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    #DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.quartiers AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'quartiers') AS foo USING UNIQUE gid USING srid=900913"

    # Example data for secured layer by role (without any area)
    #DATA "geometrie FROM (SELECT geo.geom as geom FROM geodata.table AS geo WHERE %role_id% IN (${mapfile_data_noarea_subselect} 'layer_name')) as foo USING UNIQUE gid USING srid=-1"
    # Example data for public layer
    DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.quartiers AS geo) AS foo USING UNIQUE gid USING srid=900913"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:900913"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10 
    CLASS
        NAME "Quartiers"
        STYLE
          WIDTH 0.9
          OUTLINECOLOR 0 128 0
          COLOR -1 -1 -1
        END
    END

    METADATA
        "wms_title" "Quartiers" # For WMS
        "wms_srs" "epsg:900913" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Quartiers" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END

LAYER
    NAME 'circonscription'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.circonscription AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'circonscription') AS foo USING UNIQUE gid USING srid=900913"

    # Example data for secured layer by role (without any area)
    #DATA "geometrie FROM (SELECT geo.geom as geom FROM geodata.table AS geo WHERE %role_id% IN (${mapfile_data_noarea_subselect} 'layer_name')) as foo USING UNIQUE gid USING srid=-1"
    # Example data for public layer
    #DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.airedejeux AS geo) AS foo USING UNIQUE gid USING srid=900913"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:900913"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10 
    CLASS
        NAME "Circonscription"
        STYLE
          WIDTH 0.9
          OUTLINECOLOR 192 0 0
          COLOR -1 -1 -1
        END
    END

    METADATA
        "wms_title" "Circonscription" # For WMS
        "wms_srs" "epsg:900913" # For WMS
        "wms_abstract" "Cette donnée (surfacique) renseigne les circonscriptions de la Ville de Montpellier. Les circonscriptions sont des divisions territoriales à des fins électorales pour des élections comme les élections municipales et législatives."
        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Circonscriptions" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END


